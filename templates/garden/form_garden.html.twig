{% block body %}
    {{ form_start(formGarden) }}
        <div class="form-group">
            {{ form_row(formGarden.name, {'attr': {'class': 'form-control', 'autofocus': true}}) }}
        </div>
        <div class="form-group">
            {{ form_row(formGarden.country, {'attr': {'class': 'form-control is-valid'}}) }}
        </div>
        <div class="form-group">
            <button id="btnCollapseOSMap" class="btn btn-sm btn-warning" data-toggle="collapse" href="#collapseOSMap">Cacher la carte</button>

            <div class="form-group" id="collapseOSMapFormGroup">
                <div class="collapse show" id="collapseOSMap">
                    {% include 'open_street_map.html.twig' %}
                </div>
            </div>

            <div class="form-row">
                <div class="col-6">
                    {{ form_row(formGarden.latitude, {'attr': {'class': 'form-control'}}) }}
                </div>
                <div class="col-6">
                    {{ form_row(formGarden.longitude, {'attr': {'class': 'form-control'}}) }}
                </div>
            </div>
        </div>

        <div class="form-group">
            <div class="form-row">
                <div class="col-6">
                    {{ form_row(formGarden.height, {'attr': {'class': 'form-control'}}) }}
                </div>
                <div class="col-6">
                    {{ form_row(formGarden.length, {'attr': {'class': 'form-control'}}) }}
                </div>
            </div>
        </div>

        <div class="text-right">
            {{ form_row(formGarden.save, {'attr': {'class': 'btn btn-success'}}) }}
        </div>
        {{ form_rest(formGarden) }}
    {{ form_end(formGarden) }}
{% endblock %}

{% block stylesheets %}
    <style>
        #collapseOSMap {
            margin-top: 1em;
        }

        #collapseOSMapFormGroup {
            border-left: 2px solid lightgray;
        }
    </style>
{% endblock %}

{% block javascripts %}
    <script type="text/javascript" role="modal-script">
        var btnCollapseOSMap = document.getElementById('btnCollapseOSMap');
        var gardenNameInput = document.getElementById('garden_name');
        var gardenLengthInput = document.getElementById('garden_length');
        var gardenHeightInput = document.getElementById('garden_height');

        document.getElementById('modal').addEventListener('keydown', (event) => {
           if(event.which == 13) {
               event.preventDefault();
               return;
           }
        });

        btnCollapseOSMap.addEventListener('click', (event) => {
            event.target.firstChild.data = event.target.firstChild.data == "Cacher la carte" ? "Montrer la carte" : "Cacher la carte";
            event.target.classList.toggle('btn-primary');
            event.target.classList.toggle('btn-warning');
        });

        bindTextInputValidation(gardenNameInput, ['keyup'], 0, 80);

        [gardenLengthInput, gardenHeightInput].forEach((el) => {
            bindInputIntegerValidation(el, ['keyup', 'change'], parseInt(el.getAttribute('min')), parseInt(el.getAttribute('max')));
        });
    </script>
{% endblock %}